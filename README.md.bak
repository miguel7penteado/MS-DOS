<img width="150" height="150" align="left" style="float: left; margin: 0 10px 0 0;" alt="MS-DOS logo" src="https://github.com/Microsoft/MS-DOS/blob/master/msdos-logo.png">   

# MS-DOS v1.25 e v2.0 - C√≥digo fonte
Este reposit√≥rio cont√©m o c√≥digo-fonte original e bin√°rios compilados para MS-DOS v1.25 e MS-DOS v2.0.

Estes s√£o os mesmos arquivos [originalmente compartilhados no Computer History Museum em 25 de mar√ßo de 2014]( http://www.computerhistory.org/atchm/microsoft-ms-dos-early-source-code/) e est√£o sendo (re ) publicado neste reposit√≥rio para torn√°-los mais f√°ceis de encontrar, refer√™ncia em escritos e trabalhos externos, e para permitir a explora√ß√£o e experimenta√ß√£o para os interessados nos primeiros sistemas operacionais de PC.

# Licen√ßa
Todos os arquivos neste reposit√≥rio s√£o lan√ßados sob a [Licen√ßa MIT (OSI)]( https://en.wikipedia.org/wiki/MIT_License) conforme o [arquivo LICENSE](https://github.com/Microsoft/MS -DOS/blob/master/LICENSE.md) armazenado na raiz deste reposit√≥rio.

# Contribua!
Os arquivos de origem neste reposit√≥rio s√£o para refer√™ncia hist√≥rica e ser√£o mantidos est√°ticos, portanto, **n√£o envie** solicita√ß√µes de pull sugerindo quaisquer modifica√ß√µes nos arquivos de origem, mas sinta-se √† vontade para bifurcar este reposit√≥rio e experimentar üòä.

Se, no entanto, voc√™ quiser enviar conte√∫do adicional n√£o-fonte ou modifica√ß√µes em arquivos n√£o-fonte (por exemplo, este README), envie via PR e analisaremos e consideraremos.

Este projeto adotou o [C√≥digo de Conduta de C√≥digo Aberto da Microsoft](https://opensource.microsoft.com/codeofconduct/). Para obter mais informa√ß√µes, consulte as [Perguntas frequentes sobre o c√≥digo de conduta](https://opensource.microsoft.com/codeofconduct/faq/) ou entre em contato com [opencode@microsoft.com](mailto:opencode@microsoft.com) com quaisquer perguntas adicionais ou coment√°rios.

# DOS 1.0 e 1.1
### A Revolu√ß√£o do PC

## O computador pessoal IBM
Em agosto de 1981, a IBM lan√ßou seu Personal Computer (mais conhecido como PC) e o DOS 1.0. Era amplamente esperado que a Digital Research lan√ßasse o CP/M-86 para o novo sistema (o que acabou acontecendo), mas, enquanto isso, havia o IBM Personal Computer DOS, afinal n√£o muito diferente do CP/M. A IBM tamb√©m anunciou o suporte UCSD p-System para o PC, mas apenas o DOS estava dispon√≠vel no lan√ßamento. O an√∫ncio foi ansiosamente esperado e amplamente coberto pela imprensa .

Deve ser lembrado que com o primeiro IBM PC, o DOS era opcional. O PC veio com BASIC, que poderia atuar como um sistema operacional muito primitivo, embutido em sua ROM. O ROM BASIC poderia usar fita cassete como meio de armazenamento, embora esse m√©todo nunca tenha se tornado popular e as revis√µes posteriores do PC tenham removido completamente o suporte a cassetes.

O modelo de PC b√°sico vinha com apenas 16 KB de RAM e sem drives de disco; a mem√≥ria era expans√≠vel para 256 KB (bastante em 1981). O modelo equipado com uma unidade de disco veio com 64 KB de RAM, embora o pr√≥prio DOS precisasse de menos.

Deve-se notar que o DOS teoricamente seria capaz de rodar no modelo de PC b√°sico com 16 KB de RAM. No entanto, isso n√£o era uma op√ß√£o na pr√°tica: o BIOS do PC carregava o setor de inicializa√ß√£o (de um disquete) no endere√ßo 7C00h, que √© 31KB, significando que n√£o era poss√≠vel inicializar o DOS em um PC com menos de 32KB de mem√≥ria. Os aplicativos DOS naturalmente precisavam de mem√≥ria adicional e podem ter requisitos de RAM do sistema significativamente maiores.

## Uma nota sobre os n√∫meros de vers√£o
A IBM foi inconsistente ao se referir aos n√∫meros de vers√£o do DOS. Por exemplo, ao inicializar o DOS, o usu√°rio pode ver uma mensagem identificando o Personal Computer DOS como ‚ÄúVers√£o 3.00‚Äù. No entanto, a carta de an√∫ncio da IBM para o mesmo produto se referia ao ‚ÄúDOS 3.0‚Äù. Essa inconsist√™ncia √© refletida no texto a seguir; refer√™ncias a, por exemplo, DOS 2.10 e DOS 2.1 s√£o equivalentes.

## DOS 1.0
A primeira vers√£o do DOS era quase mais interessante pelo que n√£o podia fazer do que pelo pouco que podia. O DOS 1.0 podia ler e gravar disquetes de 160 KB, iniciar aplicativos .COM e .EXE e processar arquivos em lote (.BAT). Ele poderia manter o controle de data e hora (de forma alguma um recurso onipresente na √©poca), embora ambos tivessem que ser inseridos manualmente toda vez que o DOS fosse iniciado. Um arquivo de lote chamado AUTOEXEC.BAT pode ser executado automaticamente na inicializa√ß√£o.

![](imagem/figura1.png)

N√£o havia suporte para discos r√≠gidos, sem diret√≥rios (todos os arquivos tinham que ser armazenados no diret√≥rio raiz de um disco), sem pipes ou redirecionamento, sem drivers de dispositivo carreg√°veis. A interface de programa√ß√£o do DOS tamb√©m era muito limitada.

O interpretador de comandos (COMMAND.COM) suportava apenas sete comandos internos: DIR, COPY, ERASE, PAUSE, REM, RENAME e TYPE. Al√©m disso, DATE e TIME foram implementados como comandos externos.

![](imagem/figura2.png)

Uma ferramenta de depura√ß√£o interativa b√°sica, DEBUG.COM, foi fornecida com o DOS. N√£o era f√°cil de usar, mas era bastante poderoso nas m√£os de um usu√°rio habilidoso. Um vinculador (LINK.EXE) tamb√©m foi fornecido, mas as ferramentas de desenvolvimento capazes de produzir m√≥dulos de objeto vincul√°veis ‚Äã‚Äã(como MASM) tiveram que ser adquiridas separadamente.

Para editar arquivos, foi fornecido um editor orientado a linhas muito rudimentar chamado EDLIN. EDLIN era um editor muito limitado, dif√≠cil de usar e pouco capaz. No entanto, permaneceu como o √∫nico editor enviado com o DOS por uma d√©cada, provavelmente para uma grande surpresa de seu autor original.

## BASIC

O DOS 1.0 foi talvez mais √∫til como ve√≠culo para Disk BASIC e Advanced BASIC. O ROM BASIC embutido no PC n√£o podia usar discos; os comandos DOS BASIC.COM e BASICA.COM ‚Äúatualizaram‚Äù a ROM BASIC e adicionaram suporte a disco, entre outras coisas.

![](imagem/figura3.png)

BASIC.COM e BASICA.COM junto com a ROM BASIC forneceram um ambiente completo que foi iniciado a partir do DOS, mas foi mais ou menos totalmente separado do DOS. De certa forma, o BASIC era um ambiente de desenvolvimento integrado (IDE) primitivo. O comando SYSTEM pode ser usado para retornar ao DOS.

V√°rios programas de demonstra√ß√£o escritos em BASIC foram fornecidos no disquete do DOS. Essas demonstra√ß√µes foram projetadas para mostrar alguns dos recursos do IBM PC. Todas as demos exigiam pelo menos 32 KB de mem√≥ria, algumas 48 KB e algumas utilizavam o Color Graphics Adapter (CGA).

![](imagem/figura4.png)

Como o ROM BASIC era um interpretador, os programas de demonstra√ß√£o eram efetivamente enviados na forma de fonte; os arquivos foram tokenizados e n√£o armazenados como arquivos de texto simples para economizar espa√ßo, mas eles podem ser listados e editados de dentro do ambiente BASIC.

![](imagem/figura5.png)

As demonstra√ß√µes mostraram como tocar ‚Äúm√∫sica‚Äù no IBM PC, como enviar dados para a impressora (opcional), como realizar c√°lculos b√°sicos e como exibir gr√°ficos. Nos primeiros anos do IBM PC, o BASIC provou ser popular. Era relativamente f√°cil de usar, razoavelmente capaz e vinha embutido no sistema. Para automa√ß√£o simples, era uma ferramenta adequada.

√â claro que o BASIC n√£o era muito adequado para desenvolver processadores de texto ou planilhas. Uma vez que as melhores ferramentas de desenvolvimento se tornaram dispon√≠veis, o BASIC foi usado cada vez menos e, eventualmente, a IBM o removeu das ROMs dos sucessores do PC.

## Detalhes t√©cnicos

O n√∫cleo do DOS consistia em cerca de 4.000 linhas de c√≥digo assembly; nenhuma linguagem de alto n√≠vel foi usada. Havia tr√™s componentes principais: IBMBIO.COM, IBMDOS.COM e COMMAND.COM.

IBMBIO.COM ou ‚ÄúBIOS‚Äù era um componente de driver de baixo n√≠vel. Ao adaptar o DOS a uma nova plataforma de computador, o computador BIOS normalmente precisaria da maioria das altera√ß√µes (e, idealmente, as altera√ß√µes necess√°rias nos outros componentes seriam m√≠nimas). O IBMBIO.COM continha o disco, o console e os drivers de impressora, e foi constru√≠do sobre o ROM BIOS.

O ‚ÄúDOS‚Äù propriamente dito, IBMDOS.COM, era o kernel do sistema operacional. Ele implementou a API DOS (Application Programming Interface) que pode ser chamada via INT 21h e algumas outras. Ele tamb√©m incluiu o c√≥digo de gerenciamento de arquivos e mem√≥ria.

IBMBIO.COM e IBMDOS.COM juntos formaram o n√∫cleo do DOS, mas quando a maioria dos usu√°rios do DOS pensa em DOS, eles pensam em COMMAND.COM, o interpretador de comandos. COMMAND.COM √© opcional e pode ser substitu√≠do por um workalike (como o 4DOS da JP Software) ou um aplicativo de prop√≥sito especial pode ser iniciado diretamente (por exemplo, discos de diagn√≥stico da IBM).

No entanto, na maioria dos sistemas, o COMMAND.COM foi carregado e forneceu a interface do usu√°rio. √â normalmente conhecido pelo prompt C:> , exceto que no DOS 1.0 n√£o havia tal coisa. A unidade C n√£o existia (a menos que o usu√°rio tivesse mais de duas unidades de disquete instaladas) e o comando PROMPT n√£o estava dispon√≠vel, ent√£o o prompt era A> na maioria dos casos.

O COMMAND.COM usou uma divis√£o inovadora em tr√™s partes (inicializa√ß√£o, residente e transit√≥ria) para economizar mem√≥ria. A parte de inicializa√ß√£o foi usada para processar o conte√∫do do AUTOEXEC.BAT e foi descartada assim que seu trabalho foi conclu√≠do. A parte transiente era a maior e continha o processador de comandos, manipulava a entrada do usu√°rio e implementava os comandos internos. Como os comandos internos n√£o precisavam ser carregados do disco, eles eram executados rapidamente. No entanto, eles consumiam mem√≥ria preciosa e, se um aplicativo exigisse mais, o COMMAND.COM descartava a parte transit√≥ria, deixando apenas a pequena parte residente na mem√≥ria. Depois que o aplicativo for conclu√≠do, a parte residente do COMMAND.COM recarregar√° a parte transit√≥ria do disco.

## DOS versus CP/M

O DOS foi projetado para ser amplamente compat√≠vel com o CP/M, mas n√£o era um clone dele. A compatibilidade com o CP/M trouxe recursos como a temida limita√ß√£o de nome de arquivo 8.3, mas o DOS era de v√°rias maneiras mais capaz do que o CP/M.

A diferente (e melhor) estrat√©gia de aloca√ß√£o de arquivos j√° foi mencionada anteriormente.

O DOS forneceu uma forma muito rudimentar de independ√™ncia de dispositivos, com o console (CON), impressora (PRN) e dispositivos de comunica√ß√£o serial (AUX) sendo tratados como arquivos especiais. O usu√°rio pode, assim, por exemplo, imprimir um arquivo copiando-o para o dispositivo PRN. Esse recurso foi claramente inspirado no UNIX (ou XENIX, como provavelmente foi o caso da Microsoft).

A interface de arquivo podia lidar com E/S de registro de tamanho vari√°vel, enquanto o CP/M era limitado a registros fixos de 128 bytes.

Al√©m dos arquivos .COM estilo CP/M, o DOS tamb√©m suportava arquivos .EXE reloc√°veis, um formato desenvolvido por Mark Zbikowski (da√≠ a assinatura MZ no cabe√ßalho do arquivo .EXE). Enquanto os arquivos .COM eram limitados a um m√°ximo de 64 KB combinados para c√≥digo, pilha e dados, os arquivos .EXE n√£o tinham essa limita√ß√£o. Em um PC, um execut√°vel no formato .EXE poderia ocupar toda a mem√≥ria dispon√≠vel.

## DOS 1.1

A vers√£o 1.1 foi uma atualiza√ß√£o relativamente menor para o DOS, lan√ßada junto com um Computador Pessoal atualizado em maio de 1982. O PC mais novo ostentava drives de disquetes de dupla face; O DOS simplesmente dobrou a capacidade do disco utilizando ambos os lados, passando de 160 KB para 320 KB. O pr√≥prio DOS 1.1, √© claro, ainda era fornecido em discos de 160 KB para que pudesse ser usado no modelo de PC anterior.

Ao contr√°rio da vers√£o anterior, o DOS 1.1 n√£o exigia que o usu√°rio digitasse uma data v√°lida. A tecla Enter pode ser usada para aceitar a data padr√£o, o que resultou em muitos arquivos datados de 1¬∫ de janeiro de 1980 ‚Äì antes mesmo do PC existir.

![](imagem/figura6.png)

Internamente na Microsoft, o DOS 1.1 era na verdade a vers√£o 1.25; o √∫ltimo era consistente com o versionamento 86-DOS original de Tim Paterson, mas talvez n√£o fizesse muito sentido para a IBM. O DOS 1.1 (ou 1.25) foi importante por ser a primeira vers√£o que a Microsoft licenciou para v√°rios OEMs, entre outros COMPAQ e Zenith.

![](imagem/figura7.jpg)

